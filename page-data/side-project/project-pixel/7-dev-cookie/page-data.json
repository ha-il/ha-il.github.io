{"componentChunkName":"component---src-templates-blog-post-js","path":"/side-project/project-pixel/7-dev-cookie/","result":{"data":{"site":{"siteMetadata":{"title":"하일의 작업실"}},"markdownRemark":{"id":"b6186249-f37a-55db-84b4-ed19a374b8aa","excerpt":"당신의 작업실 프로젝트 링크: https://pixel-workroom.herokuapp.com/ 프로젝트 깃허브 저장소 링크 : https://github.com/ha-il/project-pixel…","html":"<ul>\n<li>당신의 작업실 프로젝트 링크: <a href=\"https://pixel-workroom.herokuapp.com/\">https://pixel-workroom.herokuapp.com/</a></li>\n<li>프로젝트 깃허브 저장소 링크 : <a href=\"https://github.com/ha-il/project-pixel\">https://github.com/ha-il/project-pixel</a></li>\n</ul>\n<h2>들어가기 전에</h2>\n<p>이번 글부터 <a href=\"https://ha-il.github.io/side-project/project-pixel/8-dev-prop-this\">다음 글</a>까지는 개발 과정에서 맞닥뜨렸던 문제들과 그 해결 과정에 대해서 다뤄보겠습니다. 맞닥뜨렸던 문제들이야 어마어마하게 많았지만 그 중에 기억에 남는 것은 <strong>지식 또는 경험의 부족</strong>으로 인해 발생했던 문제들인 것 같습니다. 원인이 오타나 문법 실수가 아니기 때문에 더 답답했던 문제들이 있었는데요. 바로 아래와 같은 문제들이었습니다.</p>\n<ul>\n<li><strong>쿠키 설정 문제</strong>: express에서 res.local 없이 쿠키 정보를 어떻게 넘기지?</li>\n<li><strong>컴포넌트간 prop(속성) 전달 문제</strong>: 플레이리스트의 곡들을 뮤직플레이어로 어떻게 넘겨서 재생시키지?</li>\n</ul>\n<p>이번 글에서는 <strong>쿠키 설정 문제</strong>를 어떻게 해결했는지를 중점적으로 다루겠습니다.</p>\n<h2>1. 쿠키 설정 문제</h2>\n<p>쿠키에 대한 문제가 발생한 이유는 저의 경험 부족 때문이었습니다. 예전에 <strong>express</strong>와 <strong>pug</strong>로 개인 프로젝트를 만들 때, '<strong>로그인 유지</strong>' 기능을 구현하고 '<strong>로그인한 유저의 정보</strong>'를 띄우기 위해 세션을 사용한 적이 있었습니다. 그때는 <code class=\"language-text\">req.session</code>에 로그인한 유저의 정보를 저장하고 <code class=\"language-text\">res.locals</code>에 세션 정보를 저장하여 pug에서 로그인한 유저의 정보를 활용하여 렌더링할 수 있었습니다.</p>\n<p>하지만 이번에는 pug로 서버 측에서 렌더링하는 것이 아니라, <strong>바닐라 자바스크립트로 클라이언트 측에서 렌더링</strong>하기 때문에 <code class=\"language-text\">res.locals</code>를 활용할 수 없었습니다. 난감했지만 해결 방법은 간단했습니다. 서버에서 클라이언트 측으로 로그인한 유저의 정보를 보내는 방법만 알아내면 됐습니다. 서버에서 클라이언트로 뭔가 전송하는 방법 중 가장 먼저 떠오른 것은 <strong>쿠키</strong>였습니다.</p>\n<h3>1.1 res.cookie: Express 서버에서 쿠키 설정하기</h3>\n<p><a href=\"https://expressjs.com/ko/4x/api.html\">Express</a> 공식문서에서 쿠키를 설정할 수 있는 방법을 검색해보니 <a href=\"https://expressjs.com/ko/api.html#res.cookie\">res.cookie</a>를 사용하면 쿠키를 설정할 수 있었습니다. 바로 프로젝트에 적용했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">login</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// 클라이언트에서 입력 받은 유저네임과 비밀번호</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> username<span class=\"token punctuation\">,</span> password <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 유저네임에 해당하는 유저 검색</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> User<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">errorMessage</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>username<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">로 가입한 유저가 존재하지 않습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 입력받은 비밀번호와 데이터베이스에 암호화되어 저장된 비밀번호를 비교</span>\n  <span class=\"token keyword\">const</span> hashedPassword <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isValidPassword <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> hashedPassword<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isValidPassword<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">errorMessage</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">비밀번호가 일치하지 않습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 클라이언트로 공개되도 괜찮은 유저 정보만 loggedInUser 객체에 할당.</span>\n  <span class=\"token keyword\">const</span> loggedInUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">_id</span><span class=\"token operator\">:</span> user<span class=\"token punctuation\">.</span>_id<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> user<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">profileName</span><span class=\"token operator\">:</span> user<span class=\"token punctuation\">.</span>profileName<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 세션에 로그인 여부와 로그인한 유저 정보를 저장</span>\n  req<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span>isLoggedIn <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  req<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span>loggedInUser <span class=\"token operator\">=</span> loggedInUser<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 쿠키에 로그인 여부와 로그인한 유저 정보를 저장</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">cookie</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">cookie</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loggedInUser\"</span><span class=\"token punctuation\">,</span> loggedInUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>1.2 document.cookie: 클라이언트에서 쿠키 데이터 참조하기</h3>\n<p>이렇게 서버에서 쿠키를 설정했다면, 클라이언트 측에서 <code class=\"language-text\">document.cookie</code>를 사용하여 쿠키에 있는 데이터를 확인할 수 있습니다.</p>\n<p>그런데 데이터를 확인하니 조금 당황스러웠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// document.cookie\n\nisLoggedIn=true; loggedInUser=j%3A%7B%22_id%22%3A%22646f1a16e5e2041b6bac11d2%22%2C%22username%22%3A%22q%22%2C%22profileName%22%3A%22%ED%95%98%EC%9D%BC%22%7D</code></pre></div>\n<p>쿠키의 데이터가 위와 같이 나온 이유는 <code class=\"language-text\">퍼센트 인코딩</code>이 되었기 때문인데요. 위키백과의 <a href=\"https://ko.wikipedia.org/wiki/%ED%8D%BC%EC%84%BC%ED%8A%B8_%EC%9D%B8%EC%BD%94%EB%94%A9\">퍼센트 인코딩</a> 문서에 따르면 <strong>URL</strong>에서 중요하게 사용되는 <strong>예약 문자</strong>가 있고 이들 중 일부는 <strong>URI에서 중요한 문법적 의미</strong>를 가지고 있기 때문에, 그 의미로 사용할 것이 아니라면 <strong>반드시 인코딩</strong>을 해야 한다고 합니다.</p>\n<p><strong>쿠키값에 포함된 특수문자나 공백</strong>과 같은 문자들이 URL에서 사용되는 <strong>구분 기호나 예약 문자로 해석되지 않도록 하기 위해</strong> 퍼센트 인코딩되었음을 짐작할 수 있었습니다.</p>\n<p>자바스크립트에서는 <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent\">decodeURIComponent()</a> 함수를 사용해서 퍼센트 인코딩된 데이터를 디코딩할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// document.cookie\nisLoggedIn=true; loggedInUser=j%3A%7B%22_id%22%3A%22646f1a16e5e2041b6bac11d2%22%2C%22username%22%3A%22q%22%2C%22profileName%22%3A%22%ED%95%98%EC%9D%BC%22%7D\n\n\n// decodeURIComponent(document.cookie);\nisLoggedIn=true; loggedInUser=j:{\"_id\":\"646f1a16e5e2041b6bac11d2\",\"username\":\"q\",\"profileName\":\"하일\"}</code></pre></div>\n<p>(<strong>참고</strong>: 퍼센트 인코딩된 데이터를 디코딩하는 또다른 함수로 <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/decodeURI\">decodeURI()</a>가 있지만, encodeURI에서 도입할 수 없었던 <a href=\"https://ko.wikipedia.org/wiki/%EC%9D%B4%EC%8A%A4%EC%BC%80%EC%9D%B4%ED%94%84_%EC%8B%9C%ED%80%80%EC%8A%A4\">이스케이프 시퀀스</a>는 해독하지 않아서 '#' 문자는 이스케이프 시퀀스에서 디코딩되지 않는다고 합니다.)</p>\n<h3>1.3 쿠키에서 데이터를 추출하는 유틸함수 getCookie 만들기</h3>\n<p>쿠키의 데이터를 이대로 사용할 수 없기 때문에, <code class=\"language-text\">decodeURIComponent()</code>를 활용해서 쿠키를 디코딩하고 내가 원하는 데이터를 추출하기 위해 <code class=\"language-text\">getCookie</code>라는 유틸 함수를 만들었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getCookie</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>cookie <span class=\"token operator\">===</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> decodedCookie <span class=\"token operator\">=</span> <span class=\"token function\">decodeURIComponent</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>cookie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// \"isLoggedIn=true; loggedInUser=j:{\"_id\":\"12345\", ... }\"</span>\n  <span class=\"token keyword\">const</span> splitCookie <span class=\"token operator\">=</span> decodedCookie<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"; \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ['isLoggedIn=true', 'loggedInUser=j:{\"_id\": \"12345\", ... }']</span>\n  <span class=\"token keyword\">const</span> foundKey <span class=\"token operator\">=</span> splitCookie<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// key가 isLoggedIn일때 foundKey => 'isLoggedIn=true'</span>\n  <span class=\"token comment\">// key가 loggedInUser일때 foundKey => 'loggedInUser=j:{\"_id\": \"12345\", ... }'</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>foundKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> gettingValue <span class=\"token operator\">=</span> foundKey<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// gettingValue: foundKey에서 key를 제거하고 남은 value</span>\n  \n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gettingValue <span class=\"token operator\">===</span> <span class=\"token string\">\"true\"</span> <span class=\"token operator\">||</span> gettingValue <span class=\"token operator\">===</span> <span class=\"token string\">\"false\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">Boolean</span><span class=\"token punctuation\">(</span>gettingValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gettingValue<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"j:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 'j:{\"_id\": \"12345\", ... }' => {id: 12345, ...}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>gettingValue<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>1.4 유틸함수 getCookie 활용 예</h3>\n<h4>1.4.1 로그인 여부에 따른 이미지 렌더링</h4>\n<p>'당신의 작업실' 프로젝트는, 사용자의 로그인 여부에 따라서 다른 이미지를 렌더링합니다.</p>\n<p>예를 들어서 사용자가 <strong>로그아웃 상태</strong>라면 '전원이 꺼져있는 티비' 이미지를 보여주고, <strong>로그인 상태</strong>라면 '뮤직뱅크가 나오는 티비' 이미지를 보여줍니다.</p>\n<p>프로젝트에 사용된 이미지가 많기 때문에 <code class=\"language-text\">getCookie</code> 함수를 여러 곳에서 사용했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Home</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">initState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 키를 문자열로 전달하기 때문에, 오타로 인한 에러 위험이 있어서 state에 저장해두고 사용.</span>\n      <span class=\"token literal-property property\">isLoggedIn</span><span class=\"token operator\">:</span> <span class=\"token function\">getCookie</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"isLoggedIn\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div class=\"home-container\">\n        &lt;img id=\"tv\" class=\"object\" src=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isLoggedIn\n            <span class=\"token operator\">?</span> <span class=\"token string\">\"../../../../images/tv-on.gif\"</span>\n            <span class=\"token operator\">:</span> <span class=\"token string\">\"../../../../images/tv.png\"</span>\n        <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> />\n        &lt;div class=\"floor </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isLoggedIn <span class=\"token operator\">?</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"floor-dark\"</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\">\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>유저가 로그인하지 않은 상태</li>\n</ul>\n<p><img src=\"https://github.com/ha-il/project-pixel/assets/108077643/46070a15-2868-4976-8d4f-93ddbfb88f38\" alt=\"tv\"></p>\n<ul>\n<li>유저가 로그인한 상태</li>\n</ul>\n<p><img src=\"https://github.com/ha-il/project-pixel/assets/108077643/1529f865-d4c8-4a5c-a8ba-3e8f8827c277\" alt=\"tv-on\"></p>\n<h4>1.4.2 로그인한 유저의 프로필 이름 띄우기</h4>\n<p>프로젝트에 사용된 스마트폰 오브젝트의 홈 화면에는 <strong>유저의 프로필 이름</strong>을 띄우기로 했습니다. 이때도 <code class=\"language-text\">getCookie</code> 함수를 사용해 로그인한 유저의 프로필 이름을 띄울 수 있었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PhoneHome</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">initState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">loggedInUser</span><span class=\"token operator\">:</span> <span class=\"token function\">getCookie</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loggedInUser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div class=\"time-container\">\n        &lt;div class=\"date\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getCurrentDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div>\n        &lt;div class=\"time\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getCurrentTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div>\n        &lt;div class=\"greeting\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>loggedInUser<span class=\"token punctuation\">.</span>profileName\n        <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> !&lt;/div>\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>스마트폰 오브젝트의 홈 화면</li>\n</ul>\n<p><img src=\"https://github.com/ha-il/project-pixel/assets/108077643/b00034b9-db5d-49d0-bae6-de0f8c42c519\" alt=\"cookie-ex\"></p>\n<h2>마치며</h2>\n<p>이번 글에서는 <strong>쿠키 설정</strong>에 대해서 다뤄봤습니다. <a href=\"https://ha-il.github.io/side-project/project-pixel/8-dev-prop-this\">다음 글</a>에서는 <strong>컴포넌트간 props 전달 문제</strong>를 해결한 과정에 대해서 다뤄보겠습니다.</p>\n<h2>참고자료</h2>\n<ul>\n<li>\n<p>Express API</p>\n<ul>\n<li>by © StrongLoop, Inc., and other expressjs.com contributors</li>\n<li>accessed June 20</li>\n<li><a href=\"https://expressjs.com/ko/4x/api.html\">문서 링크</a></li>\n</ul>\n</li>\n<li>\n<p>Express API: Response: res.cookie</p>\n<ul>\n<li>by © StrongLoop, Inc., and other expressjs.com contributors</li>\n<li>accessed June 20</li>\n<li><a href=\"https://expressjs.com/ko/api.html#res.cookie\">문서 링크</a></li>\n</ul>\n</li>\n<li>\n<p>위키백과: 이스케이프 시퀀스</p>\n<ul>\n<li>by Wikipedia®</li>\n<li>accessed June 20</li>\n<li><a href=\"https://ko.wikipedia.org/wiki/%EC%9D%B4%EC%8A%A4%EC%BC%80%EC%9D%B4%ED%94%84_%EC%8B%9C%ED%80%80%EC%8A%A4\">문서 링크</a></li>\n</ul>\n</li>\n<li>\n<p>위키백과: 퍼센트 인코딩</p>\n<ul>\n<li>by Wikipedia®</li>\n<li>accessed June 20</li>\n<li><a href=\"https://ko.wikipedia.org/wiki/%ED%8D%BC%EC%84%BC%ED%8A%B8_%EC%9D%B8%EC%BD%94%EB%94%A9\">문서 링크</a></li>\n</ul>\n</li>\n<li>\n<p>MDN Web Docs: decodeURIComponent()</p>\n<ul>\n<li>by <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent/contributors.txt\">MDN contributors.</a></li>\n<li>accessed June 20</li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent\">문서 링크</a></li>\n</ul>\n</li>\n<li>\n<p>MDN Web Docs: decodeURI()</p>\n<ul>\n<li>by <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/decodeURI/contributors.txt\">MDN contributors.</a></li>\n<li>accessed June 20</li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/decodeURI\">문서 링크</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"[당신의 작업실] 7. 프로젝트 개발 과정 - 쿠키 설정","date":"June 20, 2023","description":"Express로 쿠키를 설정하고, 클라이언트에 전달했던 경험을 공유합니다.","mobileImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVR42j1Ty07bUBT0t3RRKoSA4DwIRVSqlLihQU5s5wFRK7pwSUIS27GDooaWBY8QkFDVlKhShVSxq1BFV2XTD+gHdNG/mWqO4yyO7vG998yZOXOtrBQ7SFgu1qoB4qaLWKGNpOXK3rLewlrFl+C9NPOqPz1ry5q0PCzpLclXy10o0UUWp0pdAVYNRw5Vw8WjjI35lw3MvdjDQn5fIl3uSk3cdKQ5mzBnKEQmAJklTBdxIzxIWB6s5gecfvyKwcUE70bXOB/foLh3KOxYw1oCs06UVIOQIdkQhCsvcW9xq4GaP8Knh38YXN+jP/4h+U73HGqxLVJ5j8Cq0ZEQyWTGLimCGo7QZ6ek2UHGPkb+6CdeWRU8f6ZBG9wh+/YYMb0pNU+3A5GfKnnSgB4oyalkzpAbPOD3it6E1hhis38L+42NrUwWud43aPUh1MK+KFGnhkYKSU4R9JI3G2zYyRFZteACXx7+YvL9N65uf+Hy7g8qzhliemvWmEzlZZQ8rG/3oLCY7nLlYGXIloslvY3cbg/vR59xMJwgOB2j1T+B9trHatkXmQzOkYAzhsvTbnSKEjjL6CkRdCHfxPxmHY+zNp7k6ogVQiMiEml5XqGh3FPWd3qSECQCZicaQwbRjDZqByJJfgQzfPiRoZHjJPMfcoGaWUAr/SUAAAAASUVORK5CYII="},"backgroundColor":"transparent","images":{"fallback":{"src":"/static/5465f7980f87a58ed020c6fec0076952/a22c4/sideProject-512x256x2.png","srcSet":"/static/5465f7980f87a58ed020c6fec0076952/cadb4/sideProject-512x256x2.png 750w,\n/static/5465f7980f87a58ed020c6fec0076952/a22c4/sideProject-512x256x2.png 856w,\n/static/5465f7980f87a58ed020c6fec0076952/7a9e5/sideProject-512x256x2.png 1024w","sizes":"(min-width: 856px) 856px, 100vw"},"sources":[{"srcSet":"/static/5465f7980f87a58ed020c6fec0076952/0b163/sideProject-512x256x2.avif 750w,\n/static/5465f7980f87a58ed020c6fec0076952/1167a/sideProject-512x256x2.avif 856w,\n/static/5465f7980f87a58ed020c6fec0076952/02545/sideProject-512x256x2.avif 1024w","type":"image/avif","sizes":"(min-width: 856px) 856px, 100vw"},{"srcSet":"/static/5465f7980f87a58ed020c6fec0076952/11ba1/sideProject-512x256x2.webp 750w,\n/static/5465f7980f87a58ed020c6fec0076952/024d1/sideProject-512x256x2.webp 856w,\n/static/5465f7980f87a58ed020c6fec0076952/25be2/sideProject-512x256x2.webp 1024w","type":"image/webp","sizes":"(min-width: 856px) 856px, 100vw"}]},"width":856,"height":428}}}}},"previous":{"fields":{"slug":"/side-project/project-pixel/6-domain/"},"frontmatter":{"title":"[당신의 작업실] 6. 요구사항 명세 과정"}},"next":{"fields":{"slug":"/side-project/project-pixel/8-dev-prop-this/"},"frontmatter":{"title":"[당신의 작업실] 8. 프로젝트 개발 과정 - prop과 this 바인딩"}}},"pageContext":{"id":"b6186249-f37a-55db-84b4-ed19a374b8aa","previousPostId":"8033209a-e152-5397-8572-68b37e86faed","nextPostId":"0c8cd0aa-7ec5-5b85-9e76-d24cc8f49090"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}