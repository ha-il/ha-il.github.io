{"componentChunkName":"component---src-templates-blog-post-js","path":"/side-project/project-pixel/4-dataBase/","result":{"data":{"site":{"siteMetadata":{"title":"하일의 작업실"}},"markdownRemark":{"id":"e61da45e-3438-5f10-9473-b76ace15a039","excerpt":"당신의 작업실 프로젝트 링크: https://pixel-workroom.herokuapp.com/ 프로젝트 깃허브 저장소 링크 : https://github.com/ha-il/project-pixel 들어가기 전에 이번 글은 이전 글에서 다뤘던 개발 환경(Webpack, Babel…","html":"<ul>\n<li>당신의 작업실 프로젝트 링크: <a href=\"https://pixel-workroom.herokuapp.com/\">https://pixel-workroom.herokuapp.com/</a></li>\n<li>프로젝트 깃허브 저장소 링크 : <a href=\"https://github.com/ha-il/project-pixel\">https://github.com/ha-il/project-pixel</a></li>\n</ul>\n<h2>들어가기 전에</h2>\n<p>이번 글은 <a href=\"https://ha-il.github.io/side-project/project-pixel/3-boiler-plate/\">이전 글</a>에서 다뤘던 개발 환경(Webpack, Babel) 설정 이후, 데이터베이스 연결에 대한 내용을 다룹니다.</p>\n<h2>1. MongoDB 선택 이유</h2>\n<p><a href=\"https://www.mongodb.com/\">MongoDB</a>는 <strong>문서 기반</strong>(document-based) 데이터베이스여서, 관계형 데이터베이스와는 다르게 구조화된 테이블이나 스키마를 사용하지 않고 <strong>JSON 형식</strong>의 문서를 저장하고 쿼리 작업을 할 수 있습니다. 아직 SQL은 다뤄본적이 없지만, JSON 형식에는 익숙한 상태였기 때문에 MongoDB를 데이터베이스로 선택했습니다.</p>\n<h2>2. MongoDB 설치</h2>\n<p>MongoDB 설치는 MongoDB 사이트 공식문서의 <a href=\"https://www.mongodb.com/docs/manual/installation/\">Install MongoDB</a>을 참고해서 진행했습니다. 저는 맥OS에서 설치하는 방법을 따랐고 사전에 <a href=\"https://brew.sh/index_ko\">Homebrew</a>가 설치되어 있었습니다. 설치 과정은 아래와 같습니다.</p>\n<ol>\n<li>Xcode 커맨드라인 도구를 설치하기 위해 맥OS 터미널에 아래 명령어를 입력합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">xcode-select --install</code></pre></div>\n<ol start=\"2\">\n<li>MongoDB Homebrew 탭을 추가합니다. (탭은 패키지 저장소의 위치를 지정하는 역할을 합니다.)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew tap mongodb/brew</code></pre></div>\n<ol start=\"3\">\n<li>Homebrew와 기존 패키지를 업데이트합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew update</code></pre></div>\n<ol start=\"4\">\n<li>MongoDB Community Edition을 설치합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew install mongodb-community@6.0</code></pre></div>\n<ol start=\"5\">\n<li>맥OS 터미널에서 아래 명령어를 입력하고 설치를 확인합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mongosh</code></pre></div>\n<p>이때 등장하는 <code class=\"language-text\">Connecting to:\t\tmongodb://127.0.0.1:27017/</code>는 개발환경에서 사용될 <code class=\"language-text\">DB_URL</code>이 됩니다.</p>\n<h2>3. Mongoose 설치</h2>\n<p>백엔드로 Node.js를 사용하고, 데이터베이스로 MongoDB를 사용하고 있으므로, <a href=\"https://nomadcoders.co/wetube/lectures/2671\">Mongoose</a>를 사용하는 것이 좋다고 생각했습니다. Mongoose는 <strong>Node.js에서 MongoDB와 상호작용하기 위한</strong> 객체 모델링 도구입니다. Mongoose를 사용하면 Node.js에서 MongoDB를 조작하기 위한 쿼리 작성과 스키마 기반의 데이터 모델링을 할 수 있습니다. Mongoose 설치 방법은 Mongoose 사이트의 <a href=\"https://mongoosejs.com/docs/index.html\">Getting Started</a>를 참고했으며, 순서는 아래와 같습니다.</p>\n<ol>\n<li><code class=\"language-text\">mongoose</code>를 설치합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install mongoose --save</code></pre></div>\n<ol start=\"2\">\n<li><code class=\"language-text\">.env</code> 파일을 생성하고 <code class=\"language-text\">DB_URL</code>을 작성합니다. (my-project 부분은 재량)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DB_URL=mongodb://127.0.0.1:27017/my-project</code></pre></div>\n<ol start=\"3\">\n<li><code class=\"language-text\">src</code> 폴더에 <code class=\"language-text\">db.js</code> 파일을 생성하고 아래와 같이 입력합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// db.js</span>\n<span class=\"token keyword\">import</span> mongoose <span class=\"token keyword\">from</span> <span class=\"token string\">\"mongoose\"</span><span class=\"token punctuation\">;</span>\n\nmongoose<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">DB_URL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> mongoose<span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">;</span>\n\ndb<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"❌ DB Error\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndb<span class=\"token punctuation\">.</span><span class=\"token function\">once</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"open\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"✅ Connected to DB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"4\">\n<li><code class=\"language-text\">server.js</code> 파일에 <code class=\"language-text\">db.js</code>을 임포트합니다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// server.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"./db.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> express <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">npm run dev:server</code> 명령어를 실행하면 데이터베이스가 연결됩니다.</p>\n<h2>4. 데이터베이스 연결 후 폴더 경로의 변화</h2>\n<p>데이터베이스 연결을 마지막으로 프로젝트의 초기 보일러 플레이트 세팅을 완료했습니다. <a href=\"https://github.com/ha-il/project-pixel/tree/09dd9640ad96b99e9ef52168313972a8676c9e52\">(당시 커밋)</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">├─ src\n│  ├─ client\n│  │  ├─ js\n│  │  │   ├── components \n│  │  │   ├── core \n│  │  │   │    └─ Component.js \n│  │  │   ├── utils \n│  │  │   └── main.js\n│  │  └─ scss\n│  │     ├─ _variables.scss\n│  │     └─ styles.scss\n│  ├─ db.js # MongoDB 연결 파일\n│  ├─ server.js\n│  └─ views\n│     └─ layout.pug\n├─ node_modules\n├─ .gitignore\n├─ README.md\n├─ babel.config.json \n├─ nodemon.json \n├─ package-lock.json\n├─ package.json\n└─ webpack.config.js \n</code></pre></div>\n<p>이렇게 데이터베이스 연결까지 예광탄을 쏴보니, 정말 마치 예광탄의 궤적이 보이는 것처럼 프로젝트의 전반적인 구조가 눈에 보이기 시작했고, 아래와 같이 다음에 해야 할 일들이 자연스럽게 떠올랐습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`SPA 구현은 확인되었으니, 이제 홈 페이지를 구성하는 주요 컴포넌트들을 작성하면 되겠다.`\n\n`각 컴포넌트에서 서버로 데이터를 요청하려면 서버에서 api router를 설정해야겠다.`\n\n`클라이언트의 요청에 응답하려면 api 경로별로 요청을 처리할 컨트롤러를 만들어야겠다.`</code></pre></div>\n<p>이렇게 예광탄을 하나씩 쏴보면서 프로젝트를 개발할 수 있는 초기 보일러 플레이팅 세팅을 마치고 나니까, 프로젝트 구현에 있어서 <strong>기술적 제약</strong>이 많이 감소했습니다. <strong>기능을 구현하지 못 할 것을 걱정할 필요 없이</strong>, 기획과 디자인을 진행할 수 있게 되었습니다. 따라서 <a href=\"https://ha-il.github.io/side-project/project-pixel/5-plan-and-design\">다음 글</a>에서는 이번 프로젝트가 왜 \"당신의 작업실\"이 되었는지, 그 기획과 디자인에 대해서 이야기해보겠습니다.</p>","frontmatter":{"title":"[당신의 작업실] 4. 데이터베이스 연결","date":"June 13, 2023","description":"MongoDB 연결과 예광탄의 궤적","mobileImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVR42j1Ty07bUBT0t3RRKoSA4DwIRVSqlLihQU5s5wFRK7pwSUIS27GDooaWBY8QkFDVlKhShVSxq1BFV2XTD+gHdNG/mWqO4yyO7vG998yZOXOtrBQ7SFgu1qoB4qaLWKGNpOXK3rLewlrFl+C9NPOqPz1ry5q0PCzpLclXy10o0UUWp0pdAVYNRw5Vw8WjjI35lw3MvdjDQn5fIl3uSk3cdKQ5mzBnKEQmAJklTBdxIzxIWB6s5gecfvyKwcUE70bXOB/foLh3KOxYw1oCs06UVIOQIdkQhCsvcW9xq4GaP8Knh38YXN+jP/4h+U73HGqxLVJ5j8Cq0ZEQyWTGLimCGo7QZ6ek2UHGPkb+6CdeWRU8f6ZBG9wh+/YYMb0pNU+3A5GfKnnSgB4oyalkzpAbPOD3it6E1hhis38L+42NrUwWud43aPUh1MK+KFGnhkYKSU4R9JI3G2zYyRFZteACXx7+YvL9N65uf+Hy7g8qzhliemvWmEzlZZQ8rG/3oLCY7nLlYGXIloslvY3cbg/vR59xMJwgOB2j1T+B9trHatkXmQzOkYAzhsvTbnSKEjjL6CkRdCHfxPxmHY+zNp7k6ogVQiMiEml5XqGh3FPWd3qSECQCZicaQwbRjDZqByJJfgQzfPiRoZHjJPMfcoGaWUAr/SUAAAAASUVORK5CYII="},"backgroundColor":"transparent","images":{"fallback":{"src":"/static/5465f7980f87a58ed020c6fec0076952/a22c4/sideProject-512x256x2.png","srcSet":"/static/5465f7980f87a58ed020c6fec0076952/cadb4/sideProject-512x256x2.png 750w,\n/static/5465f7980f87a58ed020c6fec0076952/a22c4/sideProject-512x256x2.png 856w,\n/static/5465f7980f87a58ed020c6fec0076952/7a9e5/sideProject-512x256x2.png 1024w","sizes":"(min-width: 856px) 856px, 100vw"},"sources":[{"srcSet":"/static/5465f7980f87a58ed020c6fec0076952/0b163/sideProject-512x256x2.avif 750w,\n/static/5465f7980f87a58ed020c6fec0076952/1167a/sideProject-512x256x2.avif 856w,\n/static/5465f7980f87a58ed020c6fec0076952/02545/sideProject-512x256x2.avif 1024w","type":"image/avif","sizes":"(min-width: 856px) 856px, 100vw"},{"srcSet":"/static/5465f7980f87a58ed020c6fec0076952/11ba1/sideProject-512x256x2.webp 750w,\n/static/5465f7980f87a58ed020c6fec0076952/024d1/sideProject-512x256x2.webp 856w,\n/static/5465f7980f87a58ed020c6fec0076952/25be2/sideProject-512x256x2.webp 1024w","type":"image/webp","sizes":"(min-width: 856px) 856px, 100vw"}]},"width":856,"height":428}}}}},"previous":{"fields":{"slug":"/side-project/project-pixel/3-boiler-plate/"},"frontmatter":{"title":"[당신의 작업실] 3. 개발 환경 구축하기"}},"next":null},"pageContext":{"id":"e61da45e-3438-5f10-9473-b76ace15a039","previousPostId":"67227912-ae5f-5311-b460-85a37bc5f398","nextPostId":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}