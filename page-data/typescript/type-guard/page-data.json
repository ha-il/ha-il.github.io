{"componentChunkName":"component---src-templates-blog-post-js","path":"/typescript/type-guard/","result":{"data":{"site":{"siteMetadata":{"title":"하일의 작업실"}},"markdownRemark":{"id":"425d9e09-118c-5668-acb6-7ff861bc1929","excerpt":"1. 타입 가드(type guard) 타입 가드란 여러 개의 타입으로 지정된 값을 특정 위치에서 원하는 타입으로 구분하는 것을 의미한다. 함수 파라미터 타입을 유니언 타입으로 지정한 경우 유용하게 사용할 수 있다. 아래 예시를 보자. 함수 의 파라미터 는 number 또는 string…","html":"<h2>1. 타입 가드(type guard)</h2>\n<p>타입 가드란 여러 개의 타입으로 지정된 값을 특정 위치에서 원하는 타입으로 구분하는 것을 의미한다. 함수 파라미터 타입을 유니언 타입으로 지정한 경우 유용하게 사용할 수 있다. 아래 예시를 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 에러 발생: Property 'toUpperCase' does not exist on type 'string | number'.</span>\n  <span class=\"token comment\">//          Property 'toUpperCase' does not exist on type 'number'.</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>함수 <code class=\"language-text\">foo</code>의 파라미터 <code class=\"language-text\">x</code>는 number 또는 string 타입이다. 함수 <code class=\"language-text\">foo</code>는 <code class=\"language-text\">x</code> 에 <code class=\"language-text\">toUpperCase()</code>라는 string 메서드를 사용하고 있다. 하지만 타입스크립트 입장에서 <code class=\"language-text\">x</code>는 string이 아닐 수도 있다. 따라서 타입스크립트가 에러를 발생시키는 것이다. 타입 가드를 해주면 에러를 해결할 수 있다. 아래 예시를 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> x <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> x <span class=\"token operator\">===</span> <span class=\"token string\">'number'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello, world!'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// HELLO, WORLD!</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">123.45</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 123</span></code></pre></div>\n<p>이 에러는 타입 단언으로 해결할 수도 있다. 하지만 타입 단언은 실행 시점의 에러를 방지하지 못 한다.</p>\n<p>타입 가드에 사용 되는 주요 연산자 아래와 같다. 참고로 아래 연산자들은 타입스크립트가 아닌 자바스크립트 연산자이다.\n참고로, 위의 주요 연산자 외에도 단순한 논리/비교 연산자(<code class=\"language-text\">===</code>, <code class=\"language-text\">>=</code> 등)로도 타입 가드를 적용할 수 있다.</p>\n<h3>1.1 타입 가드에 사용되는 연산자: typeof</h3>\n<p><code class=\"language-text\">typeof</code>는 특정 코드의 타입을 문자열 값으로 반환해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">typeOf</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, world!'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"string\" </span>\n<span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"number\" </span>\n<span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"boolean\" </span>\n<span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"function\" </span>\n<span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'정현수'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'원성준'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'고영우'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"object\" </span>\n<span class=\"token function\">typeOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'hail'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"object\" </span></code></pre></div>\n<p>아래 코드는 <code class=\"language-text\">typeof</code>를 활용한 타입 가드 예시이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> x <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> x <span class=\"token operator\">===</span> <span class=\"token string\">'number'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello, world!'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// HELLO, WORLD!</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">123.45</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 123</span></code></pre></div>\n<p><code class=\"language-text\">typeof</code>가 반환할 수 있는 문자열 값은 아래와 같다.</p>\n<ul>\n<li>\"string\"</li>\n<li>\"number\"</li>\n<li>\"bigint\"</li>\n<li>\"boolean\"</li>\n<li>\"symbol\"</li>\n<li>\"undefined\"</li>\n<li>\"object\"</li>\n<li>\"function\"</li>\n</ul>\n<p>목록을 보면 <code class=\"language-text\">typeof</code>는 'null'을 반환하지 않는다. <code class=\"language-text\">typeof null</code>은 'object'를 반환한다. <code class=\"language-text\">typeof = 'object'</code>로 타입 가드를 할 경우에 null 타입 값에 대해 타입 가드를 수행할 수 없다. 그럴 경우 Truthy/Falsy 값을 활용하여 타입 가드를 수행하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// x의 Truthy/Falsy 여부를 판별하면 null에 대한 타입가드를 수행할 수 있다. </span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> x <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=></span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 좋아해</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'정현수'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'원성준'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'고영우'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [\"정현수\", \"원성준\", \"고영우\"] </span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// null 좋아해</span></code></pre></div>\n<h3>1.2 타입 가드에 사용되는 연산자: instanceof</h3>\n<p><code class=\"language-text\">instanceof</code>는 변수가 대상 객체의 프로토타입 체인에 포함되는지 확인하여 true/false를 반환해준다. <code class=\"language-text\">instanceof</code> 연산자는 주로 클래스 타입이 유니언 타입으로 묶여 있을 때 타입을 구분하기 위해 사용한다. 아래 예시를 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n    name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getUserName</span><span class=\"token punctuation\">(</span>user<span class=\"token operator\">:</span> User <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">해당 인자는 User의 프로토타입 체인에 포함되지 않습니다.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> hail <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'하일'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">getUserName</span><span class=\"token punctuation\">(</span>hail<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 하일 </span>\n\n<span class=\"token function\">getUserName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'하일'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 해당 인자는 User의 프로토타입 체인에 포함되지 않습니다. </span></code></pre></div>\n<h3>1.3 타입 가드에 사용되는 연산자: in</h3>\n<p><code class=\"language-text\">in</code> 연산자는 객체에 속성이 있는지 판별하여 true/false를 반환해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'하일'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span> <span class=\"token keyword\">in</span> user<span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'loggedIn'</span> <span class=\"token keyword\">in</span> user<span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>아래 코드는 <code class=\"language-text\">in</code>을 활용한 타입 가드 예시이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Player</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n    position<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Staff</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n    role<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">printPersonInfo</span><span class=\"token punctuation\">(</span>person<span class=\"token operator\">:</span> Player <span class=\"token operator\">|</span> Staff<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'position'</span> <span class=\"token keyword\">in</span> person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'role'</span> <span class=\"token keyword\">in</span> person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>role<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">printPersonInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> position<span class=\"token operator\">:</span> <span class=\"token string\">'투수'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 투수</span>\n<span class=\"token function\">printPersonInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> role<span class=\"token operator\">:</span> <span class=\"token string\">'감독'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 감독</span></code></pre></div>\n<h3>1.4 타입 가드: 배열과 원시 타입</h3>\n<p>배열로 여러 인자를 받는 경우, 하나의 인자만 받는 경우, 이렇게 두 가지 경우에 대응하는 함수를 작성해야 할 때도 있다. 이 때는 <code class=\"language-text\">Array.isArray</code>를 사용해서 타입 가드를 하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">welcomePeople</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 여기에서 'x'는 'string[]' 타입이다.</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" and \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// x는 string[]이 아니라면 반드시 string이다.</span>\n    <span class=\"token comment\">// 따라서 else에서 별도 처리를 하지 않아도 된다.</span>\n    <span class=\"token comment\">// 여기에서 'x'는 'string' 타입이다.</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Welcome lone traveler \"</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>1.5 타입 가드 함수</h3>\n<p>타입 가드 함수는 주로 객체 유니언 타입 중 하나를 구분하는 데 사용하며, <code class=\"language-text\">in</code> 연산자과 역할은 같지만 좀 더 복잡한 경우에도 사용할 수 있다. 복잡한 상황이란, 여러 인터페이스에 공통된 속성이 많아서 <code class=\"language-text\">in</code> 연산자만으로 타입 가드를 하기가 어려운 상황을 말한다. 아래의 예시를 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Staff</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    role<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Player</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    backNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Pitcher</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    backNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n    arsenal<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">printPersonInfo</span><span class=\"token punctuation\">(</span>person<span class=\"token operator\">:</span> Staff <span class=\"token operator\">|</span> Player <span class=\"token operator\">|</span> Pitcher<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token string\">'backNumber'</span> <span class=\"token keyword\">in</span> person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>backNumber<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 이때 person의 타입: '(parameter) person: Player | Pitcher'</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">printPersonInfo</code>함수의 파라미터 <code class=\"language-text\">person</code>이 <code class=\"language-text\">Pitcher</code>타입일 때만 <code class=\"language-text\">backNumber</code>를 출력하기 위해 <code class=\"language-text\">in</code>으로 타입 가드를 했다. 하지만 if문 안의 <code class=\"language-text\">person</code>의 타입을 확인해보면 <code class=\"language-text\">Player | Pitcher</code> 타입인 것을 확인할 수 있다. <code class=\"language-text\">backNumber</code>라는 속성은 <code class=\"language-text\">Player</code>에도 있고 <code class=\"language-text\">Pitcher</code>에도 있기 때문이다. 타입 가드가 제대로 이뤄지지 않은 것이다. 이럴 때 타입 가드 함수를 사용하면 문제를 해결할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Staff</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  role<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Player</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  backNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Pitcher</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  backNumber<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  arsenal<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 타입 가드 함수</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">isPitcher</span><span class=\"token punctuation\">(</span>person<span class=\"token operator\">:</span> Staff <span class=\"token operator\">|</span> Player <span class=\"token operator\">|</span> Pitcher<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> person <span class=\"token keyword\">is</span> Pitcher <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>person <span class=\"token keyword\">as</span> Pitcher<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>arsenal <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">printPersonInfo</span><span class=\"token punctuation\">(</span>person<span class=\"token operator\">:</span> Staff <span class=\"token operator\">|</span> Player <span class=\"token operator\">|</span> Pitcher<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 타입 가드 함수 사용</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isPitcher</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>backNumber<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 이때 person의 타입: '(parameter) person: Player | Pitcher'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>타입 가드 함수의 로직을 좀 더 자세히 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// isPitcher 함수의 파라미터는 Staff | Player | Pitcher라는 유니언 타입으로 정의되었다.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">isPitcher</span><span class=\"token punctuation\">(</span>person<span class=\"token operator\">:</span> Staff <span class=\"token operator\">|</span> Player <span class=\"token operator\">|</span> Pitcher<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> person <span class=\"token keyword\">is</span> Pitcher <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 파라미터가 유니언 타입이라서 공통 속성에만 접근할 수 있으므로 as를 사용하여 Pitcher 타입으로 강제한다.</span>\n  <span class=\"token comment\">// arsenal 속성이 undefined가 아니라는 것은, person이 arsenal 속성을 가진다는 뜻이다.</span>\n  <span class=\"token comment\">// 유니언 타입 중에서 arsenal 속성을 가진 타입은 Pitcher 뿐이다.</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>person <span class=\"token keyword\">as</span> Pitcher<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>arsenal <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// `person is Pitcher`의 의미는 반환 겂이 true라면 person이라는 파라미터의 타입은 Pitcher로 간주한다는 의미이다.</span></code></pre></div>\n<h3>1.6 구별된 유니언(Discriminated unions)</h3>\n<p>(<a href=\"https://www.typescriptlang.org/docs/handbook/2/narrowing.html#discriminated-unions\">타입스크립트 공식문서 핸드북</a>에 'Discriminated unions'에 대한 내용이 나오는데, 이번 글에서는 이것을 '구별된 유니언'으로 해석해서 다루겠다.)</p>\n<p>구별된 유니언의 경우 string이나 number 같은 원시 타입보다, 여러 속성을 가지고 있는 객체 타입에 타입 가드를 해야 할 때 유용하게 사용된다. 공식문서에 나와 있는 아래의 예시를 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n  kind<span class=\"token operator\">:</span> <span class=\"token string\">\"circle\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"square\"</span><span class=\"token punctuation\">;</span>\n  radius<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  sideLength<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">Shape</code> 인터페이스를 보면, 도형의 모양에 대한 속성들이 작성되어 있다. <code class=\"language-text\">circle</code>일 경우 <code class=\"language-text\">radius</code>가 필요하고, <code class=\"language-text\">square</code>일 경우 <code class=\"language-text\">sideLength</code>가 필요하기 때문에, radius와 sideLength를 옵셔널 속성으로 지정했다. Shape 인터페이스를 활용하여 원과 정사각형의 넓이를 구할 수 있는 함수 <code class=\"language-text\">getArea</code>를 작성해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">getArea</span><span class=\"token punctuation\">(</span>shape<span class=\"token operator\">:</span> Shape<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>shape<span class=\"token punctuation\">.</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 에러 발생: 'shape.radius' is possibly 'undefined'.</span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> shape<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">shape.kind === \"circle\"</code>로 타입가드를 해줬지만 에러가 발생하는 모습이다. 이는 <code class=\"language-text\">radius</code>가 옵셔널 타입이기 때문이다. 여기서 null 아님 보장 연산자 <code class=\"language-text\">!</code>를 사용하는 방법도 있지만, 실행 에러를 방지해주지 않기 때문에 최선의 해결책은 아니다. 이 문제를 해결하기 위해서는 kind 속성을 기반으로 타입가드를 할 수 있게 Shape 인터페이스를 수정해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Circle</span> <span class=\"token punctuation\">{</span>\n  kind<span class=\"token operator\">:</span> <span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">;</span>\n  radius<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Square</span> <span class=\"token punctuation\">{</span>\n  kind<span class=\"token operator\">:</span> <span class=\"token string\">\"square\"</span><span class=\"token punctuation\">;</span>\n  sideLength<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 기존의 Shape 인터페이스를 Circle과 Square로 분리하고, 두 인터페이스를 유니언 타입으로 지정했다.</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Shape</span> <span class=\"token operator\">=</span> Circle <span class=\"token operator\">|</span> Square<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getArea</span><span class=\"token punctuation\">(</span>shape<span class=\"token operator\">:</span> Shape<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>shape<span class=\"token punctuation\">.</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 에러가 발생하지 않는다. 타입 가드가 의도한대로 수행되었다. </span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> shape<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 예시처럼 유니언 타입의 모든 타입이 리터럴 타입으로 공통 속성을 갖는 경우(위의 경우 kind가 공통 속성이다), 타입스크립트는 이를 '구별된 유니언'으로 간주하고 유니언의 멤버를 좁힐 수 있게 된다.</p>\n<ul>\n<li>리터럴 타입: 원시 타입인 string이나 number가 아니라, 'Hello, world'나 1004처럼 특정 문자열이나 숫자를 의미한다.</li>\n</ul>\n<p>(🤔: 구별된 유니언은 언제 유용하게 쓸 수 있을까? 클라이언트와 서버간의 통신을 할 때 사용할 수 있을 것 같다. 요청을 보낼 때는 GET, POST, DELETE 등을 리터럴 타입으로 다루고 'method'라는 공통 속성으로 이용해서 유니언 타입을 만들어 볼 수 있겠다. 응답을 받을 때는 상태 코드를 기준으로 200, 404 등을 리터럴 타입으로 다루고 'status'를 공통 속성으로 이용해서 유니언 타입을 만들어 볼 수 있겠다.)</p>","frontmatter":{"title":"[타입스크립트] 타입 가드","date":"September 21, 2023","description":"타입스크립트의 기초 문법을 정리했습니다.","mobileImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVR42j1SS28SURQ+A4VCtXFntRJtIwIzPC3U2iowMMyAJD4WbdIubLRpNG5qq0GICzUkTTcaFy6MC+PCLtz3V9hf4L/5zHcuw+Lk3syc873OFck2MeO0MVfpIuq0IJkGYvm2fpNbdcyVAy0r10Sy5Ot9Jm/+sSeW9yBpc0+UfAgBk+VAG2aLHVyodBHJuUgUfUjWhVyuQJY2IKk1yNI6ZHlDBwketVtKThLeWUJkK+eqMiqM2K6eUaeN2pNnGBx/wfPDEfaORhiefIXT3VZyknJWgZ2WcVLpGoWJCRsVqtVsE3LzHuqb+3hz8gu7H35jb/wHR8c/cffRU1i2a2xnmwpsTWqWrqgsWQoUjOrCzOLFDhZrPVz136E0Okf1/TmutA6QWg10mCIu3u7pGS94mqXugBmQhTZMJt6U8fpaHwveAPWPfzE4/Qf74QCL1QDRydK4KColaMQ2CxWis8JgCcifrMbmPkafTzH8dobxjzMcjr+j1t9RqyrEdtWdvoyCp4olzI4nQdmg+aTryHS28HL4CbsHQ2y/eoutF6+x3HiscXAmXuiYvLnQUCGtxqYWXG20wqeUvq/PRG6sQ66tQlJ3dIgREYwgxq7JlLMyv/JgCjINNtPQ98goNKOij0vVPuZXetpHcnXBhZYDFUSlBPwPKwg5FHL3cqMAAAAASUVORK5CYII="},"backgroundColor":"transparent","images":{"fallback":{"src":"/static/205369369a5522111ce43a38f93136be/a22c4/ts-512x256x2.png","srcSet":"/static/205369369a5522111ce43a38f93136be/cadb4/ts-512x256x2.png 750w,\n/static/205369369a5522111ce43a38f93136be/a22c4/ts-512x256x2.png 856w,\n/static/205369369a5522111ce43a38f93136be/7a9e5/ts-512x256x2.png 1024w","sizes":"(min-width: 856px) 856px, 100vw"},"sources":[{"srcSet":"/static/205369369a5522111ce43a38f93136be/0b163/ts-512x256x2.avif 750w,\n/static/205369369a5522111ce43a38f93136be/1167a/ts-512x256x2.avif 856w,\n/static/205369369a5522111ce43a38f93136be/02545/ts-512x256x2.avif 1024w","type":"image/avif","sizes":"(min-width: 856px) 856px, 100vw"},{"srcSet":"/static/205369369a5522111ce43a38f93136be/11ba1/ts-512x256x2.webp 750w,\n/static/205369369a5522111ce43a38f93136be/024d1/ts-512x256x2.webp 856w,\n/static/205369369a5522111ce43a38f93136be/25be2/ts-512x256x2.webp 1024w","type":"image/webp","sizes":"(min-width: 856px) 856px, 100vw"}]},"width":856,"height":428}}}}},"previous":{"fields":{"slug":"/typescript/types/"},"frontmatter":{"title":"[타입스크립트] 타입 추론, 타입 단언, 타입 호환"}},"next":{"fields":{"slug":"/typescript/type-manipulation/"},"frontmatter":{"title":"[타입스크립트] 타입 조작"}}},"pageContext":{"id":"425d9e09-118c-5668-acb6-7ff861bc1929","previousPostId":"f2d343a0-5d77-5f5b-a96d-6377a5421862","nextPostId":"c7cfa98f-eb9e-56aa-af8d-7d6e041a86df"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}