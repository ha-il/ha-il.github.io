---
title: "[CRA í™˜ê²½ì„¤ì •] Husky í™˜ê²½ ì„¤ì •"
date: "2023-08-28T15:27:00.000Z"
description: "git hook ìë™í™”ë¥¼ ìœ„í•œ Husky ì„¤ì •í•˜ê¸° ğŸ¶"
category: "cra"
featuredImage: "../../../../../src/images/cra-husky-256x256.png"
mobileImage: "../../../../../src/images/cra-512x256x2.png"
---

ì´ì „ ê¸€ ["[CRA í™˜ê²½ì„¤ì •] ESLintì™€ Prettier í™˜ê²½ ì„¤ì •"](https://ha-il.github.io/configure/cra-configure/eslint/)ì—ì„œ ì´ì–´ì§€ëŠ” ê¸€ì…ë‹ˆë‹¤.

## ë“¤ì–´ê°€ê¸° ì „ì—

ì§€ë‚œ ê¸€ì—ì„œëŠ” ESLintì™€ Prettierë¥¼ ì„¤ì •í•´ë´¤ë‹¤. ì´ë²ˆì—ëŠ” ë¦°íŒ…ê³¼ í¬ë§·íŒ…ì„ ì»¤ë°‹ ë˜ëŠ” í‘¸ì‰¬ ì „ì— ìë™ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ huskyë¥¼ ì„¤ì •í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë¤„ë³´ë ¤ê³  í•œë‹¤.

## 1. git hook

ì´ë²ˆ ì„¤ì •ì˜ ëª©ì ì€ ì»¤ë°‹ê³¼ í‘¸ì‰¬ ì „ì— ë¦°íŒ…ê³¼ í¬ë§·íŒ…ì„ ìë™í™”í•˜ê¸° ìœ„í•¨ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì»¤ë°‹ê³¼ í‘¸ì‰¬ ì „ì— íŠ¹ì •í•œ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì•¼ í•˜ëŠ”ë°, ê·¸ ì„¤ì •ì„ git hookì´ë¼ ë¶€ë¥¸ë‹¤. git hook ì„¤ì • ê³¼ì •ì€ ì‚¬ì „ ê³¼ì •ì´ í•„ìš”í•œë° ì´ ê³¼ì •ì´ ê°•ì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì‚¬ì „ ì„¤ì •ì„ ê°œì¸ì˜ ììœ¨ë¡œ ë§¡ê¸°ê²Œ ëœë‹¤. ì´ë ‡ê²Œ ë˜ë©´ git hook ì„¤ì •ì´ ëª¨ë“  íŒ€ì›ë“¤ì—ê²Œ ì ìš©ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, ìë™ìœ¼ë¡œ git hookì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤. ì´ ë•Œ í•„ìš”í•œ ê²ƒì´ ë°”ë¡œ `Husky`ë¼ëŠ” íŒ¨í‚¤ì§€ì´ë‹¤.

## 2. Husky ğŸ¶

> Modern native git hooks made easy
>
> Husky improves your commits and more ğŸ¶ woof! (ê·€ì—¬ì›Œ...ğŸ˜­)
>
> You can use it to lint your commit messages, run tests, lint code, etc... when you commit or push. Husky supports all Git hooks.

[Husky](https://typicode.github.io/husky/)ëŠ” git hook ì„¤ì •ì„ ë„ì™€ì£¼ëŠ” íŒ¨í‚¤ì§€ì´ë‹¤. ê°€ì¥ í° ì¥ì ì€ git hook ì„¤ì •ì„ npm installë§Œìœ¼ë¡œ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤. íŒ€ í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œ, ì €ì¥ì†Œì—ì„œ í´ë¡ í•œ í›„ npm installì„ í•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ë‹¤. ì´ë ‡ê²Œ í”„ë¡œì íŠ¸ ì§„í–‰ ê³¼ì • ì¤‘ì—ì„œ ë°˜ë“œì‹œ ë“¤ì–´ê°€ëŠ” npm install ê³¼ì •ì— git hook ì„¤ì • ê³¼ì •ì„ í¬í•¨ì‹œí‚¤ë©´ì„œ, ëª¨ë“  íŒ€ì›ì´ ì¼ê´€ëœ git hook ì„¤ì •ì„ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ í•œë‹¤.

### 2.1 Husky ì„¤ì¹˜ ê³¼ì •

ì„¤ì¹˜ ê³¼ì •ì€ [husky-Getting started](https://typicode.github.io/husky/getting-started.html)ë¥¼ ì°¸ê³ í–ˆë‹¤.

**1. huskyë¥¼ ì„¤ì¹˜í•œë‹¤.**

```
npm install husky --save-dev
```
<br/>

**2. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œì¼œ git hookì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤.**
```
npx husky install
```
<br/>

**3. npm install í•  ë•Œ ìë™ìœ¼ë¡œ git hookì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.**

```json
// package.json
{
  "scripts": {
      "prepare": "husky install"
  },
}
```

<br/>

### 2.2 Huskyë¡œ hook ë§Œë“¤ê¸°

hookì„ ë§Œë“¤ê¸° ì „ì— ìƒê°í•´ë´ì•¼í•  ë¶€ë¶„ì´ ìˆë‹¤. ë°”ë¡œ ì»¤ë°‹ ì „(pre-commit), í‘¸ì‰¬ ì „(pre-push)ì— ì–´ë–¤ í–‰ë™ì„ í•˜ê²Œ í•  ê²ƒì¸ì§€ë¥¼ ìƒê°í•´ë´ì•¼ í•œë‹¤. ë‹¹ì—°íˆ ì»¤ë°‹ ì „ì´ë“  í‘¸ì‰¬ ì „ì´ë“  ë¦°íŒ…í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ì§€ ì•ŠëŠëƒë¼ê³  ë§í•  ìˆ˜ ìˆì§€ë§Œ, ì´ ë˜í•œ íŒ€ì›ë“¤ì˜ ì‘ì—… ìŠ¤íƒ€ì¼ì— ë”°ë¼ ë‹¤ë¥´ë‹¤. 

ì˜ˆë¥¼ ë“¤ì–´, eslint ê·œì¹™ìœ¼ë¡œ consoleì„ ê¸ˆì§€í–ˆë‹¤ê³  ê°€ì •í•´ë³´ì. consoleì€ í™•ì¸ ì°¨ì›ì—ì„œ ë§ì´ ì“°ê¸°ë„ í•˜ê³ , ê·¸ë‚  í‘¸ì‰¬ í• ë§Œí¼ ì‘ì—…ì„ ì™„ë£Œí•˜ì§€ëŠ” ëª»í•´ì„œ consoleì„ í¬í•¨í•œ ì±„ë¡œ ì»¤ë°‹ì„ í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸¸ì§€ë„ ëª¨ë¥¸ë‹¤. ì´ëŸ° ìƒí™©ì´ íŒ€ì—ì„œ ìì£¼ ë°œìƒí•œë‹¤ë©´ ì»¤ë°‹ ì „ì—ëŠ” í¬ë§·íŒ…ë§Œ ì²´í¬í•˜ê³ , í‘¸ì‰¬í•  ë•ŒëŠ” ë¦°íŒ…ì„ ì²´í¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ í›…ì„ ì ìš©í•  ìˆ˜ë„ ìˆë‹¤. ì´ì²˜ëŸ¼ íŒ€ì› ë˜ëŠ” ê°œì¸ì˜ ìŠ¤íƒ€ì¼ì— ë”°ë¼ ì–´ë–¤ í›…ì„ ë§Œë“¤ ê²ƒì¸ì§€ ê²°ì •í•˜ë©´ ëœë‹¤.

ë‚˜ì˜ ê²½ìš° ì¼ë‹¨ ì½”ë“œ ìŠ¤íƒ€ì¼ ìì²´ë¥¼ ì¢€ ë¹¡ë¹¡í•˜ê²Œ ìœ ì§€ì‹œí‚¤ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ìˆì–´ì„œ ì»¤ë°‹ ì „, í‘¸ì‰¬ ì „ ëª¨ë‘ ë¦°íŒ…ê³¼ í¬ë§·íŒ…ì„ ì ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í›…ì„ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤.

í›…ì„ ë§Œë“œëŠ” Huskyì˜ ëª…ë ¹ì–´ëŠ” `husky add <file> [cmd]`ì˜ í˜•ì‹ì„ ê°€ì§„ë‹¤. ì´ í˜•ì‹ìœ¼ë¡œ hookì„ ë§Œë“¤ì–´ë³´ì.

**1. ë¨¼ì € ì»¤ë°‹ ì „(pre-commit) ìƒí™©ì—ì„œ ì‚¬ìš©í•  í›…ì„ ë§Œë“ ë‹¤.**

```
npx husky add .husky/pre-commit "npm run format && npm run lint"
```
ì„¤ì¹˜ê°€ ì˜ ì§„í–‰ëë‹¤ë©´ .husky í´ë”ì™€ ê·¸ ì•ˆì— pre-commitì´ë¼ëŠ” íŒŒì¼ì´ ë§Œë“¤ì–´ì¡Œì„ ê²ƒì´ë‹¤. ë§Œì•½ í›…ì˜ ë‚´ìš©ì„ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´ í•´ë‹¹ íŒŒì¼ì— ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

```
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run format && npm run lint  # ì—¬ê¸°ë¥¼ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

```
git commitì„ í†µí•´ hookì´ ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì. ì˜ ì ìš©ë˜ì—ˆë‹¤ë©´ í„°ë¯¸ë„ì— í›…ìœ¼ë¡œ ì„¤ì •í•œ ëª…ë ¹ì–´ë“¤(format, lint)ì´ ì‹¤í–‰ë  ê²ƒì´ë‹¤.

<br/>

**2. ê·¸ ë‹¤ìŒìœ¼ë¡œ í‘¸ì‰¬ ì „(pre-push) ìƒí™©ì—ì„œ ì‚¬ìš©í•  í›…ì„ ë§Œë“ ë‹¤.**

```
npx husky add .husky/pre-push "npm run format && npm run lint"
```
ë§ˆì°¬ê°€ì§€ë¡œ git pushë¥¼ í†µí•´ hookì´ ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.

## 3. lint-staged ì ìš©í•˜ê¸°

Huskyì™€ ë”ë¶ˆì–´ ìì£¼ ì‚¬ìš©ë˜ëŠ” íŒ¨í‚¤ì§€ê°€ ìˆì–´ì„œ ì†Œê°œí•œë‹¤. ë°”ë¡œ `lint-staged`ë¼ëŠ” íŒ¨í‚¤ì§€ì´ë‹¤. ì´ íŒ¨í‚¤ì§€ëŠ” ì´ë¦„ ê·¸ëŒ€ë¡œ stagedëœ íŒŒì¼ì— ëŒ€í•´ì„œë§Œ lintë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡Œë‹¤. ë¦°íŒ…ì€ ë§ì€ ê³¼ì •ì„ í¬í•¨í•œ ì‘ì—…ìœ¼ë¡œ ì ì§€ ì•Šì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ”ë°, ì „ì²´ íŒŒì¼ì— ëŒ€í•´ì„œ ë¦°íŒ…ì„ ìˆ˜í–‰í•  ê²½ìš° ë§ì€ ì‹œê°„ì´ ë“ ë‹¤. ë”°ë¼ì„œ ì»¤ë°‹í•  ì˜ˆì •ì¸, ì¦‰ staged ìƒíƒœì¸ íŒŒì¼ì— ëŒ€í•´ì„œë§Œ ë¦°íŒ…ì„ ìˆ˜í–‰í•˜ëŠ” í¸ì´ íš¨ìœ¨ì ì´ë‹¤. í•œ ë²ˆ ì„¤ì¹˜í•´ì„œ ì‚¬ìš©í•´ë³´ì.

ì°¸ê³ ë¡œ ì´ë²ˆì²˜ëŸ¼ CRAë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´ [lint-staged ê¹ƒí—™ ì €ì¥ì†Œ](https://github.com/okonet/lint-staged)ë³´ë‹¤ CRA ê³µì‹ ë¬¸ì„œì—ì„œ [Create React App-Formatting Code Automatically](https://create-react-app.dev/docs/setting-up-your-editor/)ë¥¼ ì°¸ê³ í•˜ëŠ” í¸ì´ ë” ì´í•´í•˜ê¸° ì‰¬ìš¸ ê²ƒì´ë‹¤.

**1. lint-stagedë¥¼ ì„¤ì¹˜í•œë‹¤.**
```
npm install --save-dev lint-staged
```
<br/>

**2. package.json íŒŒì¼ì— "lint-staged"ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.**

ì£¼ì˜!: "lint-staged"ë¥¼ "scripts"ì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. scripts ë°–ì— ì¶”ê°€í•œë‹¤.

```json
{
  "scripts": {
    "lint": "eslint . --cache",
    "format": "prettier . --write --cache",
    "prepare": "husky install"
  },
  // scripts ë°–ì— ì¶”ê°€
  "lint-staged": {
    "src/**/*.{js,jsx,ts,tsx,json,css,scss,md}": [
      "npm run format",
      "npm run lint"
    ]
  },
}
```
<br/>

**3. .husky/pre-commit íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.**

```
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx lint-staged 
```
<br/>

**4. git commit ëª…ë ¹ì–´ë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ì.**

ì´ êµ¬ê°„ì—ì„œ ë§ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ë° ì „ë¶€ ëª…ë ¹ì–´ë¥¼ ì˜ ëª» ì‘ì„±í•´ì„œ ë°œìƒí–ˆë‹¤. ë‚´ê°€ ì—ëŸ¬ë¥¼ ê²½í—˜í•œ ìƒí™©ì€ ì´ëŸ¬í–ˆë‹¤.

- "lint-staged"ì— ëª…ë ¹ì–´ë¥¼ &&ë¡œ ë¬¶ì–´ì„œ ì‘ì„±í–ˆì„ ë•Œ => &&ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•œë‹¤.
```json
"lint-staged": {
    "src/**/*.{js,jsx,ts,tsx,json,css,scss,md}": [
      "format && eslint",
  ]
},
```

- "lint-staged"ì— ëª…ë ¹ì–´ë¥¼ npm run ì—†ì´ ì‘ì„±í–ˆì„ ë•Œ => ëª…ë ¹ì–´ ì‹¤í–‰ì´ ì•ˆ ëœë‹¤.
```json
"lint-staged": {
    "src/**/*.{js,jsx,ts,tsx,json,css,scss,md}": [
      "format",
      "lint"
  ]
},
```
ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ì˜¤ë¥˜ì—†ì´ ì‹¤í–‰ëë‹¤.
```json
"lint-staged": {
    "src/**/*.{js,jsx,ts,tsx,json,css,scss,md}": [
      "npm run format",
      "npm run lint"
  ]
},
```

## ë§ˆì¹˜ë©°

ì—¬ê¸°ê¹Œì§€ ì„¤ì •í–ˆë‹¤ë©´ ë‚´ê°€ ê³„íší–ˆë˜ ê°œë°œ ë‹¨ê³„ì—ì„œì˜ í™˜ê²½ ì„¤ì •ì€ ëì´ë‹¤. ì´ì œëŠ” ë°°í¬ ë‹¨ê³„ì—ì„œ ì ìš©ì‹œí‚¬ CI/CDì— ëŒ€í•œ í™˜ê²½ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤. ë‹¤ìŒ ê¸€ì—ì„œëŠ” ë°°í¬ì™€ CI/CDì— ëŒ€í•´ì„œ ë‹¤ë£¨ê² ë‹¤.